<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daniel</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,500;1,300;1,400&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --font: 'JetBrains Mono', monospace;
    --ease: cubic-bezier(0.16, 1, 0.3, 1);
  }

  [data-theme="dark"] {
    --bg: #0a0a0a;
    --fg: #d4d4d4;
    --muted: #525252;
    --dim: #3a3a3a;
    --border: #1f1f1f;
    --accent: #a0a0a0;
    --hover: #ffffff;
    --panel-bg: #111111;
    --panel-border: #1e1e1e;
    --node-stroke: #3a3a3a;
    --node-text: #808080;
    --line-color: #2a2a2a;
    --line-dash: #1e1e1e;
    --center-fill: #e85d2a;
    --year-color: #333;
    --item-hover: #181818;
  }

  [data-theme="light"] {
    --bg: #f0ede8;
    --fg: #1a1a1a;
    --muted: #8a8a8a;
    --dim: #b0aca6;
    --border: #ddd9d4;
    --accent: #555;
    --hover: #000000;
    --panel-bg: #ffffff;
    --panel-border: #e5e2dd;
    --node-stroke: #bbb8b2;
    --node-text: #777;
    --line-color: #ccc9c3;
    --line-dash: #d5d2cd;
    --center-fill: #e85d2a;
    --year-color: #c0bdb7;
    --item-hover: #f7f5f2;
  }

  html, body {
    height: 100%;
    overflow: hidden;
    background: var(--bg);
    color: var(--fg);
    font-family: var(--font);
    -webkit-font-smoothing: antialiased;
    transition: background 0.5s var(--ease), color 0.5s var(--ease);
    border: none;
    outline: none;
  }

  body::before, body::after { display: none !important; }
  body > iframe, body > [data-vercel], body > [id^="__"]  { display: none !important; }

  ::selection { background: rgba(128,128,128,0.15); }

  .layout { display: flex; height: 100%; position: relative; }

  /* ─── Graph ─── */
  .graph-area {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    z-index: 1;
    background: var(--bg);
  }

  .graph-area svg { width: 100%; height: 100%; position: absolute; top: 0; left: 0; display: block; }

  .node-group { cursor: pointer; }
  .node-group:hover .node-shape { stroke: var(--fg); }
  .node-group:hover .node-label { fill: var(--fg); }
  .node-group.active .node-shape { stroke: var(--fg); }
  .node-group.active .node-label { fill: var(--fg); }

  .node-shape {
    fill: none;
    stroke: var(--node-stroke);
    stroke-width: 1;
    transition: stroke 0.3s, fill 0.3s;
  }

  .node-shape.filled { fill: var(--node-stroke); }

  .node-label {
    font-family: var(--font);
    font-size: 11px;
    font-weight: 400;
    fill: var(--node-text);
    text-anchor: middle;
    transition: fill 0.3s;
  }

  .edge-line {
    stroke: var(--line-color);
    stroke-width: 1;
    fill: none;
    transition: stroke 0.3s;
  }

  .edge-line.dashed {
    stroke: var(--line-dash);
    stroke-dasharray: 4 4;
  }

  .center-dot {
    fill: var(--center-fill);
    cursor: pointer;
    transition: r 0.3s var(--ease);
  }

  .center-dot:hover { r: 10; }

  .center-label {
    font-family: var(--font);
    font-size: 12px;
    font-weight: 400;
    fill: var(--fg);
    text-anchor: middle;
    transition: fill 0.3s;
  }

  /* ─── Sidebar ─── */
  .sidebar {
    width: 340px;
    min-width: 340px;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 2rem 0;
    position: fixed;
    right: 0;
    top: 0;
    z-index: 10;
  }

  .panel {
    background: var(--panel-bg);
    border: 1px solid var(--panel-border);
    border-radius: 2px;
    margin: 0 1.5rem;
    flex: 0 1 auto;
    overflow-y: auto;
    max-height: calc(100vh - 4rem);
    transition: background 0.5s var(--ease), border-color 0.5s var(--ease);
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
  }

  .panel::-webkit-scrollbar { width: 0; }

  .panel-section { border-bottom: 1px dashed var(--panel-border); transition: border-color 0.5s var(--ease); }
  .panel-section:last-child { border-bottom: none; }

  .section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    cursor: pointer;
    user-select: none;
    transition: background 0.2s;
  }

  .section-header:hover { background: var(--item-hover); }

  .section-header-left { display: flex; align-items: center; gap: 0.6rem; }

  .section-icon {
    width: 10px; height: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 10px;
    color: var(--muted);
    transition: color 0.3s;
  }

  .section-icon.dot { width: 8px; height: 8px; border-radius: 50%; background: var(--center-fill); }

  .section-name {
    font-size: 0.68rem;
    font-weight: 500;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }

  .section-toggle {
    font-size: 0.75rem;
    color: var(--muted);
    font-weight: 300;
    width: 16px;
    text-align: center;
    transition: color 0.3s;
  }

  .section-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s var(--ease);
  }

  .section-content.open { max-height: 800px; }

  .section-body { padding: 0 1rem 1rem; }

  .section-desc {
    font-size: 0.62rem;
    font-weight: 300;
    color: var(--muted);
    line-height: 1.7;
    margin-bottom: 1rem;
    padding-left: 0.2rem;
  }

  .section-desc i { font-style: italic; }

  .item {
    padding: 0.5rem 0;
    cursor: pointer;
    transition: padding-left 0.3s var(--ease);
  }

  .item:hover { padding-left: 0.3rem; }
  .item:hover .item-title { color: var(--hover); }

  .item.static { cursor: default; }
  .item.static:hover { padding-left: 0; }
  .item.static:hover .item-title { color: var(--fg); }

  .item-title { font-size: 0.72rem; font-weight: 400; transition: color 0.2s; }

  .item-sub {
    font-size: 0.58rem;
    font-weight: 300;
    color: var(--muted);
    letter-spacing: 0.04em;
    text-transform: uppercase;
    margin-top: 0.05rem;
  }

  /* ─── Detail View ─── */
  .detail-view { display: none; }
  .detail-view.active { display: block; }

  .detail-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    border-bottom: 1px dashed var(--panel-border);
    cursor: pointer;
    transition: background 0.2s;
  }

  .detail-header:hover { background: var(--item-hover); }

  .detail-back {
    font-size: 0.68rem;
    font-weight: 500;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    display: flex;
    align-items: center;
    gap: 0.6rem;
  }

  .detail-close { font-size: 0.75rem; color: var(--muted); cursor: pointer; }
  .detail-close:hover { color: var(--hover); }

  .detail-section-label {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    padding: 0.75rem 1rem;
    border-bottom: 1px dashed var(--panel-border);
  }

  .detail-section-label .section-name { font-size: 0.65rem; }

  .detail-section-close {
    margin-left: auto;
    font-size: 0.7rem;
    color: var(--muted);
    cursor: pointer;
  }

  .detail-section-close:hover { color: var(--hover); }

  .detail-body { padding: 1rem; }
  .detail-title { font-size: 0.78rem; font-weight: 400; margin-bottom: 0.15rem; }

  .detail-subtitle {
    font-size: 0.6rem;
    font-weight: 300;
    color: var(--muted);
    letter-spacing: 0.03em;
    margin-bottom: 0.8rem;
  }

  .detail-text {
    font-size: 0.65rem;
    font-weight: 300;
    color: var(--accent);
    line-height: 1.75;
  }

  .detail-connections {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    border-top: 1px dashed var(--panel-border);
    cursor: pointer;
    margin-top: 0.5rem;
  }

  .detail-connections:hover { background: var(--item-hover); }

  .detail-connections-left {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.62rem;
    font-weight: 400;
    color: var(--muted);
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }

  /* ─── Gallery Overlay ─── */
  .gallery-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: var(--bg);
    z-index: 50;
    overflow: hidden;
    cursor: crosshair;
    transition: background 0.5s var(--ease);
  }

  .gallery-overlay.active { display: block; }

  #galleryCanvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 1;
  }

  .gallery-topbar {
    position: fixed;
    top: 0; left: 0; right: 0;
    display: flex;
    align-items: center;
    gap: 1.2rem;
    padding: 1.5rem 1.8rem;
    z-index: 200;
    background: transparent;
    pointer-events: none;
  }

  .gallery-topbar > * { pointer-events: auto; }

  .gallery-btn {
    background: none;
    border: 1px solid var(--border);
    color: var(--muted);
    font-family: var(--font);
    font-size: 0.55rem;
    letter-spacing: 0.06em;
    padding: 0.3rem 0.6rem;
    cursor: pointer;
    transition: all 0.3s;
    text-transform: uppercase;
  }

  .gallery-btn:hover { color: var(--hover); border-color: var(--accent); }

  .gallery-controls {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-left: auto;
  }

  .gallery-control-label {
    font-size: 0.5rem;
    font-weight: 400;
    color: var(--muted);
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  .gallery-control-value {
    font-size: 0.55rem;
    font-weight: 400;
    color: var(--fg);
    letter-spacing: 0.1em;
    font-variant-numeric: tabular-nums;
    min-width: 2.5rem;
    text-align: center;
  }

  .gallery-counter {
    position: fixed;
    bottom: 1.5rem;
    right: 1.5rem;
    z-index: 200;
    font-size: 0.55rem;
    font-weight: 300;
    color: var(--muted);
    letter-spacing: 0.1em;
    font-variant-numeric: tabular-nums;
    pointer-events: none;
  }

  .gallery-hint {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    z-index: 200;
    text-align: center;
    color: var(--dim);
    font-size: 0.6rem;
    font-weight: 300;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    pointer-events: none;
    transition: opacity 0.5s;
    line-height: 2;
  }

  .gallery-trail-img {
    position: absolute;
    opacity: 0;
    pointer-events: none;
    width: 280px;
    max-height: 360px;
    object-fit: cover;
    transition: opacity 0.15s ease-out;
    transform: translate(-50%, -50%);
  }

  .gallery-trail-img.visible {
    opacity: 1;
    pointer-events: auto;
    cursor: zoom-in;
  }

  .gallery-trail-img.fading {
    opacity: 0;
    transition: opacity 0.8s ease-out;
  }

  .gallery-empty-state {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--muted);
    font-size: 0.65rem;
    font-weight: 300;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    border: 1px dashed var(--border);
    border-radius: 2px;
    padding: 3rem 4rem;
    gap: 0.8rem;
    cursor: pointer;
    transition: border-color 0.3s;
    z-index: 55;
  }

  .gallery-empty-state:hover { border-color: var(--accent); }
  .gallery-empty-icon { font-size: 1.5rem; color: var(--dim); margin-bottom: 0.5rem; }
  .gallery-drop-hint { font-size: 0.55rem; color: var(--dim); }

  /* ─── Gallery Nav Dock ─── */
  .gallery-nav {
    position: fixed;
    bottom: 1.5rem;
    left: 1.5rem;
    z-index: 200;
    display: flex;
    gap: 0.4rem;
    pointer-events: auto;
  }

  .gallery-nav-btn {
    background: none;
    border: 1px solid var(--border);
    color: var(--muted);
    font-family: var(--font);
    font-size: 0.5rem;
    letter-spacing: 0.06em;
    padding: 0.3rem 0.55rem;
    cursor: pointer;
    transition: all 0.3s;
    text-transform: uppercase;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
  }

  .gallery-nav-btn:hover {
    color: var(--hover);
    border-color: var(--accent);
  }

  .gallery-nav-btn .nav-icon {
    font-size: 0.45rem;
    opacity: 0.5;
  }

  /* ─── Lightbox ─── */
  .lightbox {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.95);
    z-index: 300;
    cursor: zoom-out;
    align-items: center;
    justify-content: center;
  }

  .lightbox.active { display: flex; }

  .lightbox img {
    max-width: 92vw;
    max-height: 92vh;
    object-fit: contain;
  }

  /* ─── Theme Toggle ─── */
  .theme-toggle {
    position: fixed;
    top: 1.5rem;
    right: 1.5rem;
    z-index: 100;
    background: none;
    border: 1px solid var(--border);
    color: var(--muted);
    font-family: var(--font);
    font-size: 0.55rem;
    letter-spacing: 0.06em;
    padding: 0.3rem 0.6rem;
    cursor: pointer;
    transition: all 0.3s;
    text-transform: uppercase;
  }

  .theme-toggle:hover { color: var(--hover); border-color: var(--accent); }

  /* ─── Responsive ─── */
  @media (max-width: 900px) {
    .layout { flex-direction: column; }
    .graph-area { position: fixed; width: 100%; height: 100%; }

    .sidebar {
      width: 100%; min-width: 100%; padding: 0;
      position: fixed; bottom: 0; top: auto;
      height: auto; max-height: 50vh;
      overflow-y: auto;
      justify-content: flex-end;
      background: linear-gradient(to bottom, transparent 0%, var(--bg) 12%);
      padding-top: 2rem;
    }
    .sidebar::-webkit-scrollbar { width: 0; }

    .panel {
      margin: 0 0.75rem 0.75rem;
      max-height: none;
      border-radius: 6px;
    }

    .section-header { padding: 0.85rem 1rem; min-height: 44px; }
    .section-name { font-size: 0.72rem; }
    .section-toggle { font-size: 0.85rem; }
    .item { padding: 0.6rem 0; min-height: 40px; display: flex; align-items: center; }
    .item-title { font-size: 0.75rem; }
    .section-desc { font-size: 0.65rem; line-height: 1.8; }

    .theme-toggle {
      top: 0.75rem; right: 0.75rem;
      font-size: 0.5rem;
      padding: 0.35rem 0.65rem;
      min-height: 32px;
      display: flex; align-items: center;
    }

    /* Gallery mobile */
    .gallery-trail-img { width: 55vw; max-height: 45vh; }

    .gallery-topbar {
      padding: 0.75rem 0.8rem;
      gap: 0.5rem;
    }

    .gallery-btn {
      font-size: 0.5rem;
      padding: 0.4rem 0.6rem;
      min-height: 36px;
      display: inline-flex; align-items: center;
    }

    .gallery-controls { gap: 0.3rem; }
    .gallery-control-label { font-size: 0.45rem; }
    .gallery-control-value { font-size: 0.5rem; min-width: 2rem; }

    .gallery-nav {
      bottom: 0.75rem; left: 0.75rem;
      gap: 0.3rem;
      flex-wrap: wrap;
      max-width: calc(100% - 6rem);
    }

    .gallery-nav-btn {
      font-size: 0.45rem;
      padding: 0.35rem 0.5rem;
      min-height: 36px;
      display: inline-flex; align-items: center;
    }

    .gallery-counter { bottom: 0.75rem; right: 0.75rem; font-size: 0.5rem; }
  }
</style>
</head>
<body>

<button class="theme-toggle" onclick="toggleTheme()" id="themeBtn">Light</button>

<div class="layout">

  <div class="graph-area">
    <svg id="graph" viewBox="0 0 700 600" preserveAspectRatio="xMidYMid meet"></svg>
  </div>

  <div class="sidebar">
    <div class="panel" id="panel">

      <div id="indexView">

        <!-- INDEX -->
        <div class="panel-section">
          <div class="section-header" onclick="toggleSection('index')">
            <div class="section-header-left">
              <div class="section-icon dot"></div>
              <span class="section-name">Index</span>
            </div>
            <div class="section-toggle" id="toggle-index">&minus;</div>
          </div>
          <div class="section-content open" id="content-index">
            <div class="section-body">
              <p class="section-desc">Daniel is an entrepreneur, researcher, and polymath. His work spans venture building, biotechnology, and diverse personal pursuits &mdash; bridging innovation, curiosity, and design into cohesive systems &mdash; <a href="#" style="color:var(--fg);border-bottom:1px solid var(--border);text-decoration:none;">more information</a>.</p>
            </div>
          </div>
        </div>

        <!-- HOBBIES -->
        <div class="panel-section">
          <div class="section-header" onclick="toggleSection('hobbies')">
            <div class="section-header-left">
              <div class="section-icon" style="color:var(--muted);">&#9830;</div>
              <span class="section-name">Hobbies</span>
            </div>
            <div class="section-toggle" id="toggle-hobbies">+</div>
          </div>
          <div class="section-content" id="content-hobbies">
            <div class="section-body">
              <div class="item static"><div class="item-title">Tennis</div></div>
              <div class="item static"><div class="item-title">Piano</div></div>
              <div class="item static"><div class="item-title">Golf</div></div>
              <div class="item static"><div class="item-title">Jiu Jitsu</div></div>
              <div class="item static"><div class="item-title">Muay Thai</div></div>
              <div class="item static"><div class="item-title">Reading</div></div>
              <div class="item static"><div class="item-title">Surfing</div></div>
              <div class="item static"><div class="item-title">Sim Racing</div></div>
              <div class="item static"><div class="item-title">Watches</div></div>
              <div class="item static"><div class="item-title">Violin</div></div>
              <div class="item static"><div class="item-title">Skiing</div></div>
              <div class="item static"><div class="item-title">Chopping Wood</div></div>
            </div>
          </div>
        </div>

        <!-- VENTURES -->
        <div class="panel-section">
          <div class="section-header" onclick="toggleSection('ventures')">
            <div class="section-header-left">
              <div class="section-icon" style="color:var(--muted);">&#9650;</div>
              <span class="section-name">Ventures</span>
            </div>
            <div class="section-toggle" id="toggle-ventures">+</div>
          </div>
          <div class="section-content" id="content-ventures">
            <div class="section-body">
              <div class="item" onclick="showDetail('symbaai')">
                <div class="item-title">Symba AI</div>
              </div>
              <div class="item" onclick="showDetail('biolight')">
                <div class="item-title">BioLight</div>
              </div>
              <div class="item" onclick="showDetail('hypremium')">
                <div class="item-title">Hypremium</div>
              </div>
              <div class="item" onclick="showDetail('7feur')">
                <div class="item-title">7feur Ventures</div>
              </div>
              <div class="item" onclick="showDetail('noramp')">
                <div class="item-title">NoRamp</div>
              </div>
              <div class="item" onclick="showDetail('valkri')">
                <div class="item-title">Valkri</div>
              </div>
            </div>
          </div>
        </div>

        <!-- RESEARCH -->
        <div class="panel-section">
          <div class="section-header" onclick="toggleSection('research')">
            <div class="section-header-left">
              <div class="section-icon" style="color:var(--muted);">&#9632;</div>
              <span class="section-name">Research</span>
            </div>
            <div class="section-toggle" id="toggle-research">+</div>
          </div>
          <div class="section-content" id="content-research">
            <div class="section-body">
              <a class="item" href="https://patents.google.com/patent/WO2023283166A1/en" target="_blank" rel="noopener" style="display:block;text-decoration:none;color:inherit;">
                <div class="item-title">BioLight Patent 20230012300</div>
              </a>
              <a class="item" href="https://patents.google.com/patent/WO2023283164A1/en" target="_blank" rel="noopener" style="display:block;text-decoration:none;color:inherit;">
                <div class="item-title">BioLight Patent 20230010922</div>
              </a>
              <a class="item" href="https://erc721n.org/" target="_blank" rel="noopener" style="display:block;text-decoration:none;color:inherit;">
                <div class="item-title">ERC-721N: NoRamp</div>
              </a>
            </div>
          </div>
        </div>

        <!-- WRITINGS -->
        <div class="panel-section">
          <div class="section-header" onclick="toggleSection('writings')">
            <div class="section-header-left">
              <div class="section-icon" style="color:var(--muted);">&#9671;</div>
              <span class="section-name">Writings</span>
            </div>
            <div class="section-toggle" id="toggle-writings">+</div>
          </div>
          <div class="section-content" id="content-writings">
            <div class="section-body">
              <p class="section-desc"><i>i.</i>&ensp;Coming soon.</p>
            </div>
          </div>
        </div>

        <!-- GALLERY -->
        <div class="panel-section">
          <div class="section-header" onclick="openGallery()">
            <div class="section-header-left">
              <div class="section-icon" style="color:var(--muted);">&#9679;</div>
              <span class="section-name">Gallery</span>
            </div>
            <div class="section-toggle">&rarr;</div>
          </div>
        </div>

      </div>

      <!-- Detail View -->
      <div id="detailView" class="detail-view">
        <div class="detail-header" onclick="backToIndex()">
          <div class="detail-back">
            <div class="section-icon dot"></div>
            <span>INDEX</span>
          </div>
          <div class="detail-close">&larr;</div>
        </div>
        <div class="detail-section-label">
          <div class="section-icon" id="detailSectionIcon" style="color:var(--muted);">&#9650;</div>
          <span class="section-name" id="detailSectionName">VENTURE</span>
          <div class="detail-section-close" onclick="backToIndex()">&times;</div>
        </div>
        <div class="detail-body">
          <div class="detail-title" id="detailTitle"></div>
          <div class="detail-subtitle" id="detailSubtitle"></div>
          <p class="detail-text" id="detailText"></p>
        </div>
        <div class="detail-connections" onclick="backToIndex()">
          <div class="detail-connections-left">
            <span>&#8646;</span>
            <span>Connections</span>
          </div>
          <div class="section-toggle">+</div>
        </div>
      </div>

    </div>
  </div>

</div>

<!-- Gallery Overlay -->
<div class="gallery-overlay" id="galleryOverlay">
  <div class="gallery-topbar">
    <button class="gallery-btn" onclick="closeGallery()">&larr; Back</button>
    <button class="gallery-btn" onclick="uploadImages()">+ Add</button>
    <div class="gallery-controls">
      <span class="gallery-control-label">Threshold</span>
      <button class="gallery-btn" onclick="adjustThreshold(-10)">&minus;</button>
      <span class="gallery-control-value" id="thresholdValue">0080</span>
      <button class="gallery-btn" onclick="adjustThreshold(10)">+</button>
    </div>
  </div>
  <div id="galleryCanvas"></div>
  <div class="gallery-hint" id="galleryHint">Drag to reveal images</div>
  <div class="gallery-nav">
    <button class="gallery-nav-btn" onclick="closeGallery(); toggleSection('hobbies', true);"><span class="nav-icon">&#9830;</span> Hobbies</button>
    <button class="gallery-nav-btn" onclick="closeGallery(); toggleSection('ventures', true);"><span class="nav-icon">&#9650;</span> Ventures</button>
    <button class="gallery-nav-btn" onclick="closeGallery(); toggleSection('research', true);"><span class="nav-icon">&#9632;</span> Research</button>
    <button class="gallery-nav-btn" onclick="closeGallery(); toggleSection('writings', true);"><span class="nav-icon">&#9671;</span> Writings</button>
  </div>
  <div class="gallery-counter" id="galleryCounter">0000 / 0000</div>
</div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox" onclick="closeLightbox()">
  <img id="lightboxImg" src="" alt="">
</div>

<script>
// ─── Node positions (shifted left, centered around 220,300) ───
const nodes = {
  center:   { id:'center',   x:220, y:300, label:'Daniel',       type:'center' },
  info:     { id:'info',     x:250, y:218, label:'Information',  shape:'circle-filled', parent:'center' },
  hobbies:  { id:'hobbies',  x:120, y:238, label:'Hobbies',      num:'1', section:'hobbies' },
  ventures: { id:'ventures', x:330, y:242, label:'Ventures',      num:'2', section:'ventures' },
  research: { id:'research', x:335, y:378, label:'Research',      num:'3', section:'research' },
  writings: { id:'writings', x:115, y:375, label:'Writings',      num:'4', section:'writings' },
  gallery:  { id:'gallery',  x:228, y:445, label:'Gallery',       num:'5', section:'gallery' },
  tennis:   { id:'tennis',   x:45,  y:180, label:'Tennis',        shape:'diamond', parent:'hobbies' },
  piano:    { id:'piano',    x:42,  y:298, label:'Piano',         shape:'square',  parent:'hobbies' },
  symbaai:  { id:'symbaai',  x:420, y:190, label:'Symba AI',      shape:'triangle', parent:'ventures', detail:'symbaai' },
  valkri:   { id:'valkri',   x:430, y:298, label:'Valkri',        shape:'square',   parent:'ventures', detail:'valkri' },
  patent:   { id:'patent',   x:425, y:418, label:'Patent',        shape:'square',   parent:'research', detail:'patent1' },
  erc:      { id:'erc',      x:385, y:455, label:'ERC-721N',      shape:'diamond',  parent:'research', detail:'erc721n' },
  blog:     { id:'blog',     x:42,  y:430, label:'Blog',          shape:'square',   parent:'writings' },
};

const edges = [
  { from:'center', to:'hobbies',  type:'solid' },
  { from:'center', to:'ventures', type:'solid' },
  { from:'center', to:'research', type:'solid' },
  { from:'center', to:'writings', type:'solid' },
  { from:'center', to:'gallery',  type:'solid' },
  { from:'center', to:'info',     type:'solid' },
  { from:'hobbies',  to:'tennis',   type:'dashed' },
  { from:'hobbies',  to:'piano',    type:'dashed' },
  { from:'ventures', to:'symbaai',  type:'dashed' },
  { from:'ventures', to:'valkri',   type:'dashed' },
  { from:'research', to:'patent',   type:'dashed' },
  { from:'research', to:'erc',      type:'dashed' },
  { from:'writings', to:'blog',     type:'dashed' },
];

const details = {
  symbaai:  { section:'VENTURE',  icon:'\u25B2', title:'Symba AI',                   subtitle:'Artificial Intelligence',                text:'An AI-focused venture building intelligent systems and automation tools.' },
  biolight: { section:'VENTURE',  icon:'\u25B2', title:'BioLight',                    subtitle:'Biotechnology',                          text:'A biotechnology company developing novel light-based therapeutic solutions, backed by multiple patents.' },
  hypremium:{ section:'VENTURE',  icon:'\u25B2', title:'Hypremium',                   subtitle:'Premium Products & Services',            text:'A premium brand and product venture.' },
  '7feur':  { section:'VENTURE',  icon:'\u25B2', title:'7feur Ventures',              subtitle:'Venture Building',                       text:'A venture studio and holding company focused on building and scaling technology companies.' },
  noramp:   { section:'VENTURE',  icon:'\u25B2', title:'NoRamp',                      subtitle:'Web3 Infrastructure',                    text:'Web3 infrastructure simplifying NFT minting and distribution through the ERC-721N standard.' },
  valkri:   { section:'VENTURE',  icon:'\u25B2', title:'Valkri',                      subtitle:'AI-Powered Algorithmic Hedge Fund',      text:'An AI-driven quantitative hedge fund deploying algorithmic trading strategies. Built on proprietary machine learning models for market prediction and execution.' },
  patent1:  { section:'RESEARCH', icon:'\u25A0', title:'BioLight Patent 20230012300',  subtitle:'US Patent Application',                  text:'Patent application covering novel methods and apparatus for light-based therapeutic interventions in biological systems.' },
  patent2:  { section:'RESEARCH', icon:'\u25A0', title:'BioLight Patent 20230010922',  subtitle:'US Patent Application',                  text:'Patent application covering additional innovations in photobiomodulation technology and delivery mechanisms.' },
  erc721n:  { section:'RESEARCH', icon:'\u25A0', title:'ERC-721N: NoRamp',             subtitle:'Ethereum Token Standard',                text:'A novel ERC-721 extension designed to eliminate friction in NFT minting, enabling gasless and rampless distribution at scale.' },
};

// ─── Render (animated) ───
const svg = document.getElementById('graph');
const ns = 'http://www.w3.org/2000/svg';

function el(tag, attrs) {
  const e = document.createElementNS(ns, tag);
  for (const [k,v] of Object.entries(attrs)) e.setAttribute(k, v);
  return e;
}

Object.values(nodes).forEach(n => {
  n.baseX = n.x;
  n.baseY = n.y;
  n.driftAmpX = 3 + Math.random() * 8;
  n.driftAmpY = 3 + Math.random() * 8;
  n.driftSpeedX = 0.3 + Math.random() * 0.6;
  n.driftSpeedY = 0.3 + Math.random() * 0.6;
  n.driftPhaseX = Math.random() * Math.PI * 2;
  n.driftPhaseY = Math.random() * Math.PI * 2;
});

const edgeEls = edges.map(e => {
  const line = el('line', { x1:0, y1:0, x2:0, y2:0, class:'edge-line' + (e.type==='dashed'?' dashed':'') });
  svg.appendChild(line);
  return { def: e, el: line };
});

const nodeEls = {};
Object.values(nodes).forEach(n => {
  if (n.type === 'center') {
    const g = el('g', { 'data-node': n.id });
    const dot = el('circle', { cx:0, cy:0, r:8, class:'center-dot' });
    dot.onclick = () => backToIndex();
    g.appendChild(dot);
    const lbl = el('text', { x:0, y:24, class:'center-label' });
    lbl.textContent = n.label;
    g.appendChild(lbl);
    svg.appendChild(g);
    nodeEls[n.id] = { group: g, node: n };
    return;
  }

  const g = el('g', { class:'node-group', 'data-node':n.id });

  if (n.num) {
    g.appendChild(el('circle', { cx:0, cy:0, r:12, class:'node-shape' }));
    const num = el('text', { x:0, y:3.5, class:'node-label', 'text-anchor':'middle', 'font-size':'9' });
    num.textContent = n.num;
    g.appendChild(num);
  } else if (n.shape === 'triangle') {
    const s = 10;
    g.appendChild(el('polygon', { points:`0,${-s} ${-s},${s*0.7} ${s},${s*0.7}`, class:'node-shape' }));
  } else if (n.shape === 'square') {
    const s = 9;
    g.appendChild(el('rect', { x:-s, y:-s, width:s*2, height:s*2, class:'node-shape' }));
  } else if (n.shape === 'diamond') {
    const s = 10;
    g.appendChild(el('polygon', { points:`0,${-s} ${s},0 0,${s} ${-s},0`, class:'node-shape' }));
  } else if (n.shape === 'circle-filled') {
    g.appendChild(el('circle', { cx:0, cy:0, r:6, class:'node-shape filled' }));
  }

  const ly = n.num ? 28 : (n.shape==='triangle' ? 24 : 22);
  const lbl = el('text', { x:0, y:ly, class:'node-label' });
  lbl.textContent = n.label;
  g.appendChild(lbl);

  g.onclick = () => {
    document.querySelectorAll('.node-group').forEach(e => e.classList.remove('active'));
    g.classList.add('active');
    if (n.id === 'gallery') { openGallery(); return; }
    if (n.section) toggleSection(n.section, true);
    else if (n.detail) showDetail(n.detail);
  };

  svg.appendChild(g);
  nodeEls[n.id] = { group: g, node: n };
});

// ─── Animation loop ───
function animate(time) {
  const t = time * 0.001;

  Object.values(nodes).forEach(n => {
    let dx = Math.sin(t * n.driftSpeedX + n.driftPhaseX) * n.driftAmpX;
    let dy = Math.cos(t * n.driftSpeedY + n.driftPhaseY) * n.driftAmpY;
    dx += Math.sin(t * n.driftSpeedX * 0.4 + n.driftPhaseY) * n.driftAmpX * 0.5;
    dy += Math.cos(t * n.driftSpeedY * 0.3 + n.driftPhaseX) * n.driftAmpY * 0.5;

    n.x = n.baseX + dx;
    n.y = n.baseY + dy;
  });

  Object.values(nodeEls).forEach(({ group, node }) => {
    group.setAttribute('transform', `translate(${node.x}, ${node.y})`);
  });

  edgeEls.forEach(({ def, el }) => {
    const f = nodes[def.from], t = nodes[def.to];
    el.setAttribute('x1', f.x); el.setAttribute('y1', f.y);
    el.setAttribute('x2', t.x); el.setAttribute('y2', t.y);
  });

  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);

// ─── Sidebar Logic ───
function toggleSection(id, forceOpen) {
  const content = document.getElementById('content-' + id);
  const toggle = document.getElementById('toggle-' + id);
  if (!content) return;
  if (forceOpen || !content.classList.contains('open')) {
    content.classList.add('open');
    if (toggle) toggle.textContent = '\u2212';
  } else {
    content.classList.remove('open');
    if (toggle) toggle.textContent = '+';
  }
}

function showDetail(id) {
  const d = details[id];
  if (!d) return;
  document.getElementById('indexView').style.display = 'none';
  document.getElementById('detailView').classList.add('active');
  document.getElementById('detailSectionIcon').textContent = d.icon;
  document.getElementById('detailSectionName').textContent = d.section;
  document.getElementById('detailTitle').textContent = d.title;
  document.getElementById('detailSubtitle').textContent = d.subtitle;
  document.getElementById('detailText').textContent = d.text;
}

function backToIndex() {
  document.getElementById('indexView').style.display = 'block';
  document.getElementById('detailView').classList.remove('active');
  document.querySelectorAll('.node-group').forEach(e => e.classList.remove('active'));
}

function toggleTheme() {
  const html = document.documentElement;
  const btn = document.getElementById('themeBtn');
  if (html.getAttribute('data-theme') === 'dark') {
    html.setAttribute('data-theme', 'light');
    btn.textContent = 'Dark';
  } else {
    html.setAttribute('data-theme', 'dark');
    btn.textContent = 'Light';
  }
}

// ─── Gallery (cursor image trail) ───
const galleryImagePaths = [
  'images/gallery/001b8894-0739-4552-831a-7284c319f4ef.jpg',
  'images/gallery/1213CC54-4D2F-4496-A100-4BE3954323A2.jpg',
  'images/gallery/121a7047.JPG',
  'images/gallery/16DDE18E-BFF3-442A-8D4C-197554C42481.jpg',
  'images/gallery/2018-10-12 19:01:33.039.JPG',
  'images/gallery/2518E9C9-5E25-4139-925D-9C3AFE5D1E47.jpg',
  'images/gallery/2BCF51DA-25F7-474C-90A9-BA688B56C46C.jpg',
  'images/gallery/2DF55EB4-2C39-4FB0-AB88-7F0B64B152A8.jpg',
  'images/gallery/2E56B9FA-444A-414A-B73F-A914DB28C33C.JPG',
  'images/gallery/3938C2A0-B667-48B4-89BA-0363BA1F0B32.jpg',
  'images/gallery/4FA91145-B3E5-4333-9FA3-D156D87A9E58 2.jpg',
  'images/gallery/4bd5d04a-1545-4e2a-bcbf-4ba407c9cf54.jpg',
  'images/gallery/58EAC692-42F4-4D52-A5B2-61A959FB6597.JPG',
  'images/gallery/5CFEEBB3-6517-4D86-B525-4B6409E4A2EC.jpg',
  'images/gallery/7201794F-E058-4A67-8D75-29189797E5C8.JPG',
  'images/gallery/73F49F65-20B4-43FA-8AA1-444493EF6037.jpg',
  'images/gallery/86b7bcfd-a34a-459e-aca6-caed19aabbb6.JPG',
  'images/gallery/8BF4E397-B65C-46CD-8534-3625AFB7A885.jpg',
  'images/gallery/8F407CE0-C978-485B-A9DC-7E3D1DA2616C.jpg',
  'images/gallery/911E0BEC-9CC1-4CB8-BE9D-C4E69082AC79.JPG',
  'images/gallery/A4D4AB23-754B-470A-8174-27D6706AAF1F.jpg',
  'images/gallery/BB8676A4-6C4D-4EE8-9505-F00A4FF61062.jpg',
  'images/gallery/C84E4CA4-58BE-4626-82CC-2A3BFE136F32.JPG',
  'images/gallery/DCF64BC0-BE1C-4D62-A9EB-B2D047B06D9E.JPG',
  'images/gallery/DE4623E0-2EC3-42C5-800E-7FE2E7006714.jpg',
  'images/gallery/DSC00001.jpg',
  'images/gallery/DSCF2245.JPG',
  'images/gallery/DSCN4181.jpg',
  'images/gallery/DSCN4397.jpg',
  'images/gallery/EB92BA16-B78D-4C8E-B03F-0218FB16D756.jpg',
  'images/gallery/F3536A3D-9BD0-4500-868E-DB0C31842BA4.jpg',
  'images/gallery/FCD2DB7B-2CDB-4DD1-99D9-5C7F1412223E.JPG',
  'images/gallery/Facetune_06-07-2023-22-33-07.jpg',
  'images/gallery/Facetune_26-07-2023-20-04-43.jpg',
  'images/gallery/IMG_0004.jpg',
  'images/gallery/IMG_0065.jpg',
  'images/gallery/IMG_0115.JPG',
  'images/gallery/IMG_0194.jpg',
  'images/gallery/IMG_0375.jpg',
  'images/gallery/IMG_0376.jpg',
  'images/gallery/IMG_0400.jpg',
  'images/gallery/IMG_0443.JPG',
  'images/gallery/IMG_0468.jpg',
  'images/gallery/IMG_0474.JPG',
  'images/gallery/IMG_0490.jpg',
  'images/gallery/IMG_0505.jpg',
  'images/gallery/IMG_0510.jpg',
  'images/gallery/IMG_0544.jpg',
  'images/gallery/IMG_0563.jpg',
  'images/gallery/IMG_0621.jpg',
  'images/gallery/IMG_0736.jpg',
  'images/gallery/IMG_0744.jpg',
  'images/gallery/IMG_0772.jpg',
  'images/gallery/IMG_0796.jpg',
  'images/gallery/IMG_1064.jpg',
  'images/gallery/IMG_1186.JPG',
  'images/gallery/IMG_1193.jpg',
  'images/gallery/IMG_1205.jpg',
  'images/gallery/IMG_1248.jpg',
  'images/gallery/IMG_1315.jpg',
  'images/gallery/IMG_1389.jpg',
  'images/gallery/IMG_1409.jpg',
  'images/gallery/IMG_1427.jpg',
  'images/gallery/IMG_1442.jpg',
  'images/gallery/IMG_1507.JPG',
  'images/gallery/IMG_1575.jpg',
  'images/gallery/IMG_1625 2.jpg',
  'images/gallery/IMG_1652.jpg',
  'images/gallery/IMG_1681.jpg',
  'images/gallery/IMG_1717.jpg',
  'images/gallery/IMG_1721.jpg',
  'images/gallery/IMG_1738.jpg',
  'images/gallery/IMG_1754.jpg',
  'images/gallery/IMG_1784.jpg',
  'images/gallery/IMG_1811.jpg',
  'images/gallery/IMG_1912.jpg',
  'images/gallery/IMG_1915.JPG',
  'images/gallery/IMG_1923.jpg',
  'images/gallery/IMG_1925.jpg',
  'images/gallery/IMG_1958.jpg',
  'images/gallery/IMG_1985.jpg',
  'images/gallery/IMG_2059.jpg',
  'images/gallery/IMG_2075.jpg',
  'images/gallery/IMG_2084.jpg',
  'images/gallery/IMG_2087.jpg',
  'images/gallery/IMG_2123.jpg',
  'images/gallery/IMG_2125.jpg',
  'images/gallery/IMG_2133.JPG',
  'images/gallery/IMG_2152.jpg',
  'images/gallery/IMG_2187.JPG',
  'images/gallery/IMG_2193.jpg',
  'images/gallery/IMG_2214.jpg',
  'images/gallery/IMG_2238 2.JPG',
  'images/gallery/IMG_2309.jpg',
  'images/gallery/IMG_2323.jpg',
  'images/gallery/IMG_2366.jpg',
  'images/gallery/IMG_2369.jpg',
  'images/gallery/IMG_2383.jpg',
  'images/gallery/IMG_2390.jpg',
  'images/gallery/IMG_2424.jpg',
  'images/gallery/IMG_2426.jpg',
  'images/gallery/IMG_2508.JPG',
  'images/gallery/IMG_2514.jpg',
  'images/gallery/IMG_2518.jpg',
  'images/gallery/IMG_2535.jpg',
  'images/gallery/IMG_2599.jpg',
  'images/gallery/IMG_2605.jpg',
  'images/gallery/IMG_2650.jpg',
  'images/gallery/IMG_2683.JPG',
  'images/gallery/IMG_2685.jpg',
  'images/gallery/IMG_2689.jpg',
  'images/gallery/IMG_2705.jpg',
  'images/gallery/IMG_2748.jpg',
  'images/gallery/IMG_2833.jpg',
  'images/gallery/IMG_2904.jpg',
  'images/gallery/IMG_2913.jpg',
  'images/gallery/IMG_2914.jpg',
  'images/gallery/IMG_2927.jpg',
  'images/gallery/IMG_2970.jpg',
  'images/gallery/IMG_2995.jpg',
  'images/gallery/IMG_3038.jpg',
  'images/gallery/IMG_3040.jpg',
  'images/gallery/IMG_3083.jpg',
  'images/gallery/IMG_3125.JPG',
  'images/gallery/IMG_3168.jpg',
  'images/gallery/IMG_3169.jpg',
  'images/gallery/IMG_3239.jpg',
  'images/gallery/IMG_3397.jpg',
  'images/gallery/IMG_3421.jpg',
  'images/gallery/IMG_3430.jpg',
  'images/gallery/IMG_3517.jpg',
  'images/gallery/IMG_3537.jpg',
  'images/gallery/IMG_3546.jpg',
  'images/gallery/IMG_3583.JPG',
  'images/gallery/IMG_3588.jpg',
  'images/gallery/IMG_3679.JPG',
  'images/gallery/IMG_3704.jpg',
  'images/gallery/IMG_3739.JPG',
  'images/gallery/IMG_3761.JPG',
  'images/gallery/IMG_3765.jpg',
  'images/gallery/IMG_3828.jpg',
  'images/gallery/IMG_3866.jpg',
  'images/gallery/IMG_3958.jpg',
  'images/gallery/IMG_4013.JPG',
  'images/gallery/IMG_4137.JPG',
  'images/gallery/IMG_4158.jpg',
  'images/gallery/IMG_4178.jpg',
  'images/gallery/IMG_4185.jpg',
  'images/gallery/IMG_4213.jpg',
  'images/gallery/IMG_4224 2.jpg',
  'images/gallery/IMG_4226.jpg',
  'images/gallery/IMG_4297.jpg',
  'images/gallery/IMG_4301.jpg',
  'images/gallery/IMG_4346.jpg',
  'images/gallery/IMG_4392.jpg',
  'images/gallery/IMG_4400.jpg',
  'images/gallery/IMG_4420.jpg',
  'images/gallery/IMG_4619.jpg',
  'images/gallery/IMG_4632.jpg',
  'images/gallery/IMG_4682.jpg',
  'images/gallery/IMG_4759.jpg',
  'images/gallery/IMG_4848.jpg',
  'images/gallery/IMG_4867.jpg',
  'images/gallery/IMG_5013.jpg',
  'images/gallery/IMG_5040.jpg',
  'images/gallery/IMG_5114.jpg',
  'images/gallery/IMG_5117.jpg',
  'images/gallery/IMG_5121.jpg',
  'images/gallery/IMG_5209.jpg',
  'images/gallery/IMG_5285.jpg',
  'images/gallery/IMG_5405.jpg',
  'images/gallery/IMG_5420.jpg',
  'images/gallery/IMG_5422.jpg',
  'images/gallery/IMG_5537.jpg',
  'images/gallery/IMG_5636.jpg',
  'images/gallery/IMG_5673.jpg',
  'images/gallery/IMG_5713.jpg',
  'images/gallery/IMG_5778.JPG',
  'images/gallery/IMG_5871.jpg',
  'images/gallery/IMG_5880.jpg',
  'images/gallery/IMG_5906.jpg',
  'images/gallery/IMG_6015.jpg',
  'images/gallery/IMG_6016.jpg',
  'images/gallery/IMG_6030.jpg',
  'images/gallery/IMG_6054.jpg',
  'images/gallery/IMG_6109.jpg',
  'images/gallery/IMG_6297.jpg',
  'images/gallery/IMG_6306.JPG',
  'images/gallery/IMG_6372.jpg',
  'images/gallery/IMG_6498.jpg',
  'images/gallery/IMG_6562.jpg',
  'images/gallery/IMG_6573.jpg',
  'images/gallery/IMG_6637.jpg',
  'images/gallery/IMG_6654.jpg',
  'images/gallery/IMG_6858.jpg',
  'images/gallery/IMG_6949.jpg',
  'images/gallery/IMG_7028.jpg',
  'images/gallery/IMG_7190.jpg',
  'images/gallery/IMG_7196.jpg',
  'images/gallery/IMG_7242.jpg',
  'images/gallery/IMG_7250.jpg',
  'images/gallery/IMG_7383.jpg',
  'images/gallery/IMG_7397.jpg',
  'images/gallery/IMG_7443.JPG',
  'images/gallery/IMG_7448.jpg',
  'images/gallery/IMG_7514.jpg',
  'images/gallery/IMG_7538.jpg',
  'images/gallery/IMG_7667.jpg',
  'images/gallery/IMG_7748.jpg',
  'images/gallery/IMG_7758.jpg',
  'images/gallery/IMG_7793.jpg',
  'images/gallery/IMG_7832.jpg',
  'images/gallery/IMG_7920.jpg',
  'images/gallery/IMG_7927.jpg',
  'images/gallery/IMG_7969.jpg',
  'images/gallery/IMG_7978.jpg',
  'images/gallery/IMG_7984 2.jpg',
  'images/gallery/IMG_7984.jpg',
  'images/gallery/IMG_8017.jpg',
  'images/gallery/IMG_8034 2.jpg',
  'images/gallery/IMG_8076.JPG',
  'images/gallery/IMG_8081.JPG',
  'images/gallery/IMG_8087.jpg',
  'images/gallery/IMG_8170.jpg',
  'images/gallery/IMG_8182.jpg',
  'images/gallery/IMG_8189.jpg',
  'images/gallery/IMG_8251.jpg',
  'images/gallery/IMG_8349.jpg',
  'images/gallery/IMG_8397.jpg',
  'images/gallery/IMG_8481.jpg',
  'images/gallery/IMG_8588.jpg',
  'images/gallery/IMG_8617.JPG',
  'images/gallery/IMG_8701.JPG',
  'images/gallery/IMG_8725.jpg',
  'images/gallery/IMG_8749 2.jpg',
  'images/gallery/IMG_8749.jpg',
  'images/gallery/IMG_8751.jpg',
  'images/gallery/IMG_8798.jpg',
  'images/gallery/IMG_8831.jpg',
  'images/gallery/IMG_8886.jpg',
  'images/gallery/IMG_8974.jpg',
  'images/gallery/IMG_9033.jpg',
  'images/gallery/IMG_9034.jpg',
  'images/gallery/IMG_9077.jpg',
  'images/gallery/IMG_9090.jpg',
  'images/gallery/IMG_9161.jpg',
  'images/gallery/IMG_9193.jpg',
  'images/gallery/IMG_9239.jpg',
  'images/gallery/IMG_9254.jpg',
  'images/gallery/IMG_9389.jpg',
  'images/gallery/IMG_9391.jpg',
  'images/gallery/IMG_9409.jpg',
  'images/gallery/IMG_9485.jpg',
  'images/gallery/IMG_9489.jpg',
  'images/gallery/IMG_9498.jpg',
  'images/gallery/IMG_9501.jpg',
  'images/gallery/IMG_9627.JPG',
  'images/gallery/IMG_9829.jpg',
  'images/gallery/IMG_9879.jpg',
  'images/gallery/IMG_9990.jpg',
  'images/gallery/_DSC1602 2.jpg',
  'images/gallery/f8eccc90-e288-41e8-b911-46717c6570ce.JPG',
  'images/gallery/image_1.jpg',
  'images/gallery/jaim810-008.JPG',
];

let galleryThreshold = 80;
let galleryLastX = 0, galleryLastY = 0;
let galleryCurrentIndex = 0;
let galleryZIndex = 1;
let galleryImageEls = [];
let galleryAllSrcs = [];
let galleryActive = false;
let galleryHintShown = true;
const MAX_VISIBLE = 12;

function openGallery() {
  const overlay = document.getElementById('galleryOverlay');
  overlay.classList.add('active');
  document.getElementById('themeBtn').style.display = 'none';
  galleryActive = true;
  galleryCurrentIndex = 0;
  galleryZIndex = 1;
  galleryLastX = 0;
  galleryLastY = 0;
  galleryHintShown = true;
  document.getElementById('galleryHint').style.opacity = '1';
  buildGalleryImages();
}

function closeGallery() {
  document.getElementById('galleryOverlay').classList.remove('active');
  document.getElementById('themeBtn').style.display = '';
  galleryActive = false;
  const canvas = document.getElementById('galleryCanvas');
  canvas.innerHTML = '';
  galleryImageEls = [];
}

function buildGalleryImages() {
  const canvas = document.getElementById('galleryCanvas');
  canvas.innerHTML = '';
  galleryImageEls = [];

  // Combine file paths + localStorage uploads
  const stored = JSON.parse(localStorage.getItem('galleryImages') || '[]');
  galleryAllSrcs = [
    ...galleryImagePaths,
    ...stored.map(img => img.src)
  ];

  const counter = document.getElementById('galleryCounter');

  if (galleryAllSrcs.length === 0) {
    counter.textContent = '0000 / 0000';
    document.getElementById('galleryHint').style.opacity = '0';
    canvas.innerHTML = '<div class="gallery-empty-state" onclick="uploadImages()"><div class="gallery-empty-icon">+</div><div>Drop images here</div><div class="gallery-drop-hint">or click to browse</div></div>';
    return;
  }

  // Pre-create image elements (all hidden)
  galleryAllSrcs.forEach((src, i) => {
    const img = document.createElement('img');
    img.src = src;
    img.alt = '';
    img.className = 'gallery-trail-img';
    img.style.zIndex = 0;
    img.onclick = (e) => {
      e.stopPropagation();
      openLightbox(src);
    };
    canvas.appendChild(img);
    galleryImageEls.push(img);
  });

  updateCounter();
}

function updateCounter() {
  const counter = document.getElementById('galleryCounter');
  const current = String(galleryCurrentIndex).padStart(4, '0');
  const total = String(galleryAllSrcs.length).padStart(4, '0');
  counter.textContent = `${current} / ${total}`;
}

function adjustThreshold(delta) {
  galleryThreshold = Math.max(20, Math.min(200, galleryThreshold + delta));
  document.getElementById('thresholdValue').textContent = String(galleryThreshold).padStart(4, '0');
}

// Cursor/touch trail handler
const galleryOverlay = document.getElementById('galleryOverlay');

function handleGalleryMove(clientX, clientY) {
  if (!galleryActive || galleryAllSrcs.length === 0) return;

  if (galleryHintShown) {
    document.getElementById('galleryHint').style.opacity = '0';
    galleryHintShown = false;
  }

  const dx = clientX - galleryLastX;
  const dy = clientY - galleryLastY;
  const distance = Math.sqrt(dx * dx + dy * dy);

  if (distance > galleryThreshold) {
    const img = galleryImageEls[galleryCurrentIndex];

    const oldIndex = (galleryCurrentIndex - MAX_VISIBLE + galleryImageEls.length) % galleryImageEls.length;
    if (galleryImageEls.length > MAX_VISIBLE) {
      const oldImg = galleryImageEls[oldIndex];
      oldImg.classList.remove('visible');
      oldImg.classList.add('fading');
      setTimeout(() => { oldImg.classList.remove('fading'); }, 800);
    }

    galleryZIndex++;
    img.style.left = clientX + 'px';
    img.style.top = clientY + 'px';
    img.style.zIndex = galleryZIndex;
    img.classList.remove('fading');
    img.classList.add('visible');

    galleryCurrentIndex = (galleryCurrentIndex + 1) % galleryImageEls.length;
    galleryLastX = clientX;
    galleryLastY = clientY;

    updateCounter();
  }
}

galleryOverlay.addEventListener('mousemove', e => {
  handleGalleryMove(e.clientX, e.clientY);
});

galleryOverlay.addEventListener('touchmove', e => {
  e.preventDefault();
  const touch = e.touches[0];
  handleGalleryMove(touch.clientX, touch.clientY);
}, { passive: false });

galleryOverlay.addEventListener('touchstart', e => {
  if (!galleryActive) return;
  const touch = e.touches[0];
  galleryLastX = touch.clientX;
  galleryLastY = touch.clientY;
}, { passive: true });

// Drag and drop on gallery overlay
galleryOverlay.addEventListener('dragover', e => { e.preventDefault(); e.stopPropagation(); });
galleryOverlay.addEventListener('drop', e => {
  e.preventDefault();
  e.stopPropagation();
  handleFiles(e.dataTransfer.files);
});

function handleFiles(files) {
  const stored = JSON.parse(localStorage.getItem('galleryImages') || '[]');
  let loaded = 0;
  const total = files.length;

  Array.from(files).forEach(file => {
    if (!file.type.startsWith('image/')) { loaded++; return; }
    const reader = new FileReader();
    reader.onload = ev => {
      stored.push({ src: ev.target.result, alt: file.name });
      localStorage.setItem('galleryImages', JSON.stringify(stored));
      loaded++;
      if (loaded >= total) buildGalleryImages();
    };
    reader.readAsDataURL(file);
  });
}

function uploadImages() {
  const input = document.createElement('input');
  input.type = 'file';
  input.multiple = true;
  input.accept = 'image/*';
  input.onchange = () => handleFiles(input.files);
  input.click();
}

function openLightbox(src) {
  document.getElementById('lightboxImg').src = src;
  document.getElementById('lightbox').classList.add('active');
}

function closeLightbox() {
  document.getElementById('lightbox').classList.remove('active');
}
</script>

</body>
</html>
